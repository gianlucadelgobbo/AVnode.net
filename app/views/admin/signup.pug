extends ../layout

block content
  .container
    .row
      .offset-lg-2.col-lg-8.col-md-12
        form(method="post")
          //(autocomplete='off')
          div
            .form-group.row
              label.col-form-label.col-md-3.labelSignup=__("Subscribe as")
              .col-md-9
                .form-group
                  .btn-group.btn-group-toggle(data-toggle="buttons")
                    label.col-form-label.btn.btn-primary(class=(!get.crewname || get.crewname === "") ? undefined : "active")
                      input(type="radio" name="is_crew" value='false' autocomplete="off" onclick="$('#crew').collapse('hide')" checked=(!get.crewname || get.crewname !== "") ? undefined : "checked")
                      !=__("Single")
                    label.col-form-label.btn.btn-primary(class=(get.crewname && get.crewname !== "") ? "active" : undefined)
                      input(type="radio" name="is_crew" value='true' autocomplete="off" onclick="$('#crew').collapse('show')" checked=(get.crewname && get.crewname !== "") ? "checked" : undefined)
                      !=__("Crew/Organization")
              
          .collapse#crew(class=(get.crewname && get.crewname !== "") ? "show" : "")
            .form-group.row
              label.col-form-label.col-md-3=__("Crew Name")
              .col-md-9.mb-4
                input.form-control(type='text' name='crewname' placeholder=__("Crew Name") value=get.crewname)
                if err && Object.keys(err.errors).indexOf('crewname')!==-1
                  .badge.badge-danger!=err.errors.crewname.message
            h4.mt-2=__("YOU AS MEMBER OF THE CREW")
            .mb-4=__("You will be able to add crew members once you confirmed your account")
          .form-group.row
            label.col-form-label.col-md-3=__("Stage Name")
            .col-md-9.mb-4
              input.form-control(type='text' name='stagename' placeholder=__("Stage Name") value=get.stagename)
              if err && Object.keys(err.errors).indexOf('stagename')!==-1
                .badge.badge-danger!=err.errors.stagename.message
          .form-group.row
            label.col-form-label.col-md-3=__("Birthday")
            .col-md-9.mb-4
              .d-flex
                - if(get.birthday) get.birthday = new Date(get.birthday)
                input.form-control.mr-3(type='text' onchange='$(".birthday_real").val($(this).val().split("/")[2]+"/"+$(this).val().split("/")[1]+"/"+$(this).val().split("/")[0])' id='birthday' style='width:125px' value=get.birthday && get.birthday.getDate() ? get.birthday.getDate()+"/"+(get.birthday.getMonth()+1)+"/"+get.birthday.getFullYear() : "")
                input.birthday_real(type='hidden' name='birthday' value=get.birthday && get.birthday.getDate() ? get.birthday.getFullYear()+"/"+(get.birthday.getMonth()+1)+"/"+get.birthday.getDate() : "")
              if err && Object.keys(err.errors).indexOf('birthday')!==-1
                .badge.badge-danger!=err.errors.birthday.message
          .form-group.row
            label.col-form-label.col-md-3=__("Email")
            .col-md-9.mb-4
              input.form-control(type='email' name='email' placeholder=__("Email") value=get.email)
              if err && Object.keys(err.errors).indexOf('email')!==-1
                .badge.badge-danger!=err.errors.email.message
          .form-group.row
            label.col-form-label.col-md-3=__("City, country")
            .col-md-9.mb-4
              - if (!get.addresses) get.addresses = [{geometry:{}}]
              input.form-control.location-search-input(type='text' autocomplete='off' role='combobox' aria-autocomplete='list' aria-expanded='false' placeholder='City, country' value=get.addresses[0].formatted_address)
              input.lat(type='hidden' name='addresses[0][geometry][lat]' value=get.addresses[0].geometry.lat)
              input.lng(type='hidden' name='addresses[0][geometry][lng]' value=get.addresses[0].geometry.lng)
              input.locality(type='hidden' name='addresses[0][locality]' value=get.addresses[0].locality)
              input.country(type='hidden' name='addresses[0][country]' value=get.addresses[0].country)
              input.formatted_address(type='hidden' name='addresses[0][formatted_address]' value=get.addresses[0].formatted_address)
              if err && Object.keys(err.errors).indexOf('addresses')!==-1
                .badge.badge-danger!=err.errors["addresses"][0].message
          .form-group.row
            label.col-form-label.col-md-3=__("Password")
            .col-md-9.mb-4
              input.form-control(type='password' name='password' autocomplete='new-password' placeholder=__("Password") value='')
              if err && Object.keys(err.errors).indexOf('password')!==-1
                .badge.badge-danger!=err.errors.password.message
          .form-group.row
            label.col-form-label.col-md-3=__("Confirm Password")
            .col-md-9.mb-4
              input.form-control(type='password' name='confirmPassword' onfocus="if ($(this).parent().find('.badge').length) $(this).parent().find('.badge').remove()" autocomplete='new-password' placeholder=__("Confirm Password") value='')
              if err && Object.keys(err.errors).indexOf('confirmPassword')!==-1
                .badge.badge-danger!=err.errors.confirmPassword.message
          button.btn.btn-primary.float-right.btn-lg.mb-3(type='submit')=__("SIGNUP")
